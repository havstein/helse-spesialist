fragment oppdrag on GraphQLOppdrag {
    fagsystemId,
    tidsstempel,
    utbetalingslinjer {
        tom,
        fom,
        grad,
        dagsats
    },
    simulering {
        totalbelop,
        perioder {
            fom,
            tom,
            utbetalinger {
                detaljer {
                    belop,
                    antallSats,
                    faktiskFom,
                    faktiskTom,
                    klassekode,
                    klassekodeBeskrivelse,
                    konto,
                    refunderesOrgNr,
                    sats,
                    tilbakeforing,
                    typeSats,
                    uforegrad,
                    utbetalingstype
                },
                feilkonto,
                forfall,
                utbetalesTilId,
                utbetalesTilNavn
            }
        }
    }
}

fragment grunnlag on GraphQLVilkarsgrunnlag {
    inntekter {
        arbeidsgiver,
        omregnetArsinntekt {
            belop,
            inntekterFraAOrdningen {
                maned,
                sum
            },
            kilde,
            manedsbelop
        },
        sammenligningsgrunnlag {
            belop,
            inntekterFraAOrdningen {
                maned,
                sum
            }
        }
        deaktivert
    },
    omregnetArsinntekt,
    sammenligningsgrunnlag,
    skjaeringstidspunkt,
    sykepengegrunnlag
}

query HentSnapshot($fnr: String!) {
    person(fnr: $fnr) {
        aktorId,
        arbeidsgivere {
            organisasjonsnummer,
            ghostPerioder {
                id,
                fom,
                tom,
                skjaeringstidspunkt,
                vilkarsgrunnlaghistorikkId,
                deaktivert
            },
            generasjoner {
                id,
                perioder {
                    __typename,
                    behandlingstype,
                    erForkastet,
                    fom,
                    tom,
                    inntektstype,
                    opprettet,
                    periodetype,
                    tidslinje {
                        begrunnelser,
                        dato,
                        grad,
                        kilde {
                            id,
                            type
                        },
                        sykdomsdagtype,
                        utbetalingsdagtype,
                        utbetalingsinfo {
                            arbeidsgiverbelop,
                            inntekt,
                            personbelop,
                            refusjonsbelop,
                            totalGrad,
                            utbetaling
                        }
                    },
                    vedtaksperiodeId,
                    ... on GraphQLUberegnetPeriode {
                        __typename,
                        id,
                    }
                    ... on GraphQLBeregnetPeriode {
                        __typename,
                        id,
                        aktivitetslogg {
                            alvorlighetsgrad,
                            melding,
                            tidsstempel,
                            vedtaksperiodeId
                        },
                        beregningId,
                        forbrukteSykedager,
                        gjenstaendeSykedager,
                        hendelser {
                            ... on GraphQLInntektsmelding {
                                __typename,
                                beregnetInntekt,
                                id,
                                mottattDato,
                                type
                            },
                            ... on GraphQLSoknadArbeidsgiver {
                                __typename,
                                fom,
                                id,
                                rapportertDato,
                                sendtArbeidsgiver,
                                tom,
                                type
                            },
                            ... on GraphQLSoknadNav {
                                __typename,
                                fom,
                                id,
                                rapportertDato,
                                sendtNav,
                                tom,
                                type
                            },
                            ... on GraphQLSykmelding {
                                __typename,
                                fom,
                                id,
                                rapportertDato,
                                tom,
                                type
                            }
                        },
                        maksdato,
                        periodevilkar {
                            alder {
                                alderSisteSykedag,
                                oppfylt
                            },
                            soknadsfrist {
                                oppfylt,
                                sendtNav,
                                soknadFom,
                                soknadTom
                            },
                            sykepengedager {
                                forbrukteSykedager,
                                gjenstaendeSykedager,
                                maksdato,
                                oppfylt,
                                skjaeringstidspunkt
                            }
                        }
                        skjaeringstidspunkt,
                        utbetaling {
                            id,
                            arbeidsgiverFagsystemId,
                            arbeidsgiverNettoBelop,
                            personFagsystemId,
                            personNettoBelop,
                            statusEnum,
                            typeEnum,
                            vurdering {
                                automatisk,
                                godkjent,
                                ident,
                                tidsstempel
                            },
                            personoppdrag {
                                ...oppdrag
                            },
                            arbeidsgiveroppdrag {
                                ...oppdrag
                            }
                        },
                        refusjon {
                            belop,
                            arbeidsgiverperioder {
                                tom,
                                fom
                            },
                            endringer {
                                belop,
                                dato
                            },
                            forsteFravaersdag,
                            sisteRefusjonsdag
                        }
                        vilkarsgrunnlaghistorikkId,
                        tilstand
                    }
                }
            }
        },
        dodsdato,
        fodselsnummer,
        inntektsgrunnlag {
            avviksprosent,
            grunnbelop,
            inntekter {
                arbeidsgiver,
                omregnetArsinntekt {
                    belop,
                    inntekterFraAOrdningen {
                        maned,
                        sum
                    },
                    kilde,
                    manedsbelop
                },
                sammenligningsgrunnlag {
                    belop,
                    inntekterFraAOrdningen {
                        maned,
                        sum
                    }
                }
            },
            maksUtbetalingPerDag,
            omregnetArsinntekt,
            oppfyllerKravOmMinstelonn,
            sammenligningsgrunnlag,
            skjaeringstidspunkt,
            sykepengegrunnlag
        },
        versjon,
        vilkarsgrunnlaghistorikk {
            id,
            grunnlag {
                vilkarsgrunnlagtype,
                ...grunnlag,
                ... on GraphQLInfotrygdVilkarsgrunnlag {
                    __typename,
                },
                ... on GraphQLSpleisVilkarsgrunnlag {
                    __typename,
                    antallOpptjeningsdagerErMinst,
                    avviksprosent,
                    grunnbelop,
                    oppfyllerKravOmMedlemskap,
                    oppfyllerKravOmMinstelonn,
                    oppfyllerKravOmOpptjening,
                    opptjeningFra,
                }
            }
        }
    }
}
